(()=>{const e=document.querySelectorAll(".ncbi-genome-load-btn[data-ncbi-load]");if(!e.length)return;const n="ncbi-sviewer-script",t="https://www.ncbi.nlm.nih.gov/projects/sviewer/js/sviewer.js";let d=null;const i=()=>d||(d=new Promise((e,d)=>{const i=document.getElementById(n);if(i)return"true"===i.dataset.loaded?void e():(i.addEventListener("load",()=>{i.dataset.loaded="true",e()},{once:!0}),void i.addEventListener("error",()=>d(new Error("Failed to load NCBI SeqViewer script")),{once:!0}));const o=document.createElement("script");o.id=n,o.src=t,o.async=!0,o.addEventListener("load",()=>{o.dataset.loaded="true",e()},{once:!0}),o.addEventListener("error",()=>d(new Error("Failed to load NCBI SeqViewer script")),{once:!0}),document.head.appendChild(o)}),d),o=e=>{const n=document.getElementById(e);return n?(n.hidden=!1,n):null},r=()=>new Promise((e,n)=>{const t=15e3,d=100,i=Date.now(),o=()=>{window.SeqView&&window.SeqView.App&&"function"==typeof window.SeqView.App.findAppByDivId?e():Date.now()-i>t?n(new Error("NCBI SeqViewer initialization timed out")):window.setTimeout(o,d)};o()}),a=e=>r().then(()=>{if(window.SeqView.App.findAppByDivId(e))return;new window.SeqView.App(e).load()});for(const n of e){const e=(n.dataset.ncbiLoad||"").trim(),t=n.parentElement&&n.parentElement.querySelector("[data-ncbi-error]");e&&n.addEventListener("click",()=>{o(e)&&(t&&(t.hidden=!0),n.disabled=!0,i().then(()=>a(e)).then(()=>{n.remove()}).catch(()=>{n.disabled=!1,t&&(t.hidden=!1)}))})}})();