{% assign repo_parts = include.repository | split: '/' %}
{% assign username = repo_parts.first %}
{% assign repo_name = repo_parts.last %}

{% if site.data.repositories.github_users contains username %}
  {% assign show_owner = false %}
{% else %}
  {% assign show_owner = true %}
{% endif %}

{% assign lang = site.active_lang | split: '-' | first %}
{% if lang == 'pt' %}
  {% assign lang = site.active_lang %}
{% endif %}

{% if site.data.repositories.repo_description_lines_max %}
  {% assign max_lines = site.data.repositories.repo_description_lines_max %}
{% else %}
  {% assign max_lines = 2 %}
{% endif %}

<div class="repo p-2 text-center">
  <a href="https://github.com/{{ include.repository }}">
    {% comment %} available locales: https://github.com/anuraghazra/github-readme-stats?tab=readme-ov-file#available-locales {% endcomment %}
    <img
      class="only-light w-100"
      alt="{{ include.repository }}"
      src="https://github-readme-stats.vercel.app/api/pin/?username={{ username }}&repo={{ repo_name }}&theme={{ site.repo_theme_light }}&locale={{ lang }}&show_owner={{ show_owner }}&description_lines_count={{ max_lines }}"
    >
    <img
      class="only-dark w-100"
      alt="{{ include.repository }}"
      src="https://github-readme-stats.vercel.app/api/pin/?username={{ username }}&repo={{ repo_name }}&theme={{ site.repo_theme_dark }}&locale={{ lang }}&show_owner={{ show_owner }}&description_lines_count={{ max_lines }}"
    >
  </a>
</div>
