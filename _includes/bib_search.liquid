{% if site.bib_search %}
  {% assign is_ja = false %}
  {% if site.active_lang == 'ja' %}
    {% assign is_ja = true %}
  {% endif %}

  <script src="{{ '/assets/js/bibsearch.js' | relative_url | bust_file_cache }}" type="module"></script>

  <div class="publications-controls" aria-label="Publication filters">
    <div class="publications-controls-main">
      <input
        type="text"
        id="bibsearch"
        spellcheck="false"
        autocomplete="off"
        class="search bibsearch-form-input"
        placeholder="{% if is_ja %}キーワードで検索{% else %}Search publications{% endif %}"
      >
      <select id="pub-sort" class="pub-select" aria-label="{% if is_ja %}並び替え{% else %}Sort publications{% endif %}">
        <option value="newest">
          {% if is_ja %}新着順{% else %}Newest{% endif %}
        </option>
        <option value="crossref-citations">
          {% if is_ja %}被引用順（Crossref）{% else %}Crossref citations{% endif %}
        </option>
        <option value="dimensions-citations">
          {% if is_ja %}被引用順（Dimensions）{% else %}Dimensions citations{% endif %}
        </option>
        <option value="altmetric">
          {% if is_ja %}Altmetric順{% else %}Altmetric{% endif %}
        </option>
        <option value="lab">
          {% if is_ja %}Lab貢献度順{% else %}Lab contribution{% endif %}
        </option>
      </select>
      <button type="button" id="pub-reset-filters" class="pub-button">
        {% if is_ja %}絞り込みを解除{% else %}Reset filters{% endif %}
      </button>
    </div>
    <div class="publications-controls-facets">
      <label class="pub-facet-label" for="facet-year">
        <span>
          {%- if is_ja %}year{% else %}year{% endif -%}
        </span>
        <select id="facet-year" class="pub-select facet-select"></select>
      </label>
      <label class="pub-facet-label" for="facet-article-type">
        <span>
          {%- if is_ja %}article type{% else %}article type{% endif -%}
        </span>
        <select id="facet-article-type" class="pub-select facet-select"></select>
      </label>
      <label class="pub-facet-label" for="facet-first-author">
        <span>
          {%- if is_ja %}first author{% else %}first author{% endif -%}
        </span>
        <select id="facet-first-author" class="pub-select facet-select"></select>
      </label>
      <label class="pub-facet-label" for="facet-corresponding">
        <span>
          {%- if is_ja %}corresponding author{% else %}corresponding author{% endif -%}
        </span>
        <select id="facet-corresponding" class="pub-select facet-select"></select>
      </label>
    </div>
    <div class="publications-controls-status">
      <span id="pub-active-count"></span>
      <span id="pub-badge-status" class="pub-badge-status"></span>
      <button type="button" id="pub-load-badges" class="pub-button pub-button-secondary">
        {% if is_ja %}外部バッジを読み込む{% else %}Load impact badges{% endif %}
      </button>
    </div>
  </div>

  <section class="publications-dashboard" id="publications-dashboard">
    <div class="publications-dashboard-grid">
      <article class="publications-dashboard-card">
        <canvas id="pub-chart-year" aria-label="Publications by year chart"></canvas>
      </article>
    </div>
  </section>
{% endif %}
